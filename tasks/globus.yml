
# http://docs.ansible.com/ansible/get_url_module.html
- name: Download Globus Connect Server
  shell: sudo curl -LOs http://toolkit.globus.org/ftppub/globus-connect-server/globus-connect-server-repo_latest_all.deb

- name: Install Globus Repo
  shell: sudo dpkg -i globus-connect-server-repo_latest_all.deb

# http://docs.ansible.com/ansible/apt_module.html
- name: apt-get update
  shell: sudo apt-get update

# http://docs.ansible.com/ansible/apt_module.html
- name: Install Globus Connect Server
  shell: sudo apt-get install globus-connect-server

 - name: test
   shell: echo {{ ansible_hostname }}  > test1.tmp

 - template: src=globus-connect-server.conf dest=/etc/globus-connect-server.conf

 - expect:
     command: globus-connect-server-setup
     responses:
       (?i)Globus Username: "{{ globus_username }}"
       (?i)Globus Password: "{{ globus_passwd }}"

 vars_prompt:
  - name: globus_username
    prompt: "Enter your Globus Online Username:"
    private: no
  - name: globus_passwd
    prompt: "Enter your Globus Online Password:"
    private: yes

 vars:
   globus_endpoint_name: "{{ globus_username }}#{{ ansible_hostname }}"



